<header-component></header-component>
<div class="container-fluid">
    <div class="row">
        <main role="main" class="col-md-9 col-lg-12" style="margin-top: 50px">
            <div class="d-flex justify-content-between flex-wrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2"><i class="fa fa-shopping-cart"></i> Carrito</h1>               
            </div>     
        </main>
    </div>

    <div ng-show="carritoVacioTabla">
        <div class="table-responsive tablacentro">
            <table class="table table-striped table-sm">
                <tr class="thead-dark">                            

                    <th style="min-width: 110px;">
                        Foto
                    </th>
                    <th>
                        Descripción 
                    </th>
                    <th style="min-width: 110px;">
                        Precio
                    </th>
                    <th>
                        Cantidad
                    </th> 
                    <th>
                        Precio Total €
                    </th>
                    <th>
                        Acciones
                    </th>
                </tr>
<!--                <tr class="thead-dark">
                    <th id="colorNegroborder">                    
                        <button type="button" class="btn btn-light btn-sm" ng-click="ordena('foto', 'asc')">
                            <i class="fas fa-long-arrow-alt-up"></i>
                        </button>
                        <button type="button" class="btn btn-light btn-sm" ng-click="ordena('foto', 'desc')">
                            <i class="fas fa-long-arrow-alt-down"></i>
                        </button>                         
                    </th>
                    <th id="colorNegroborder">                
                        <button type="button" class="btn btn-light btn-sm" ng-click="ordena('desc', 'asc')">
                            <i class="fas fa-long-arrow-alt-up"></i>
                        </button>
                        <button type="button" class="btn btn-light btn-sm" ng-click="ordena('desc', 'desc')">
                            <i class="fas fa-long-arrow-alt-down"></i>
                        </button>                  
                    </th>
                    <th id="colorNegroborder">                    
                        <button type="button" class="btn btn-light btn-sm" ng-click="ordena('precio', 'asc')">
                            <a class="fas fa-long-arrow-alt-up" ></a>

                        </button>
                        <button type="button" class="btn btn-light btn-sm" ng-click="ordena('precio', 'desc')">
                            <i class="fas fa-long-arrow-alt-down"></i>
                        </button></th>
                    <th id="colorNegroborder">
                        <button type="button" class="btn btn-light btn-sm" ng-click="ordena('cantidad', 'asc')">
                            <i class="fas fa-long-arrow-alt-up"></i>
                        </button>
                        <button type="button" class="btn btn-light btn-sm" ng-click="ordena('cantidad', 'desc')">
                            <i class="fas fa-long-arrow-alt-down"></i>
                        </button>
                    </th>
                    <th id="colorNegroborder">                    
                    </th>
                </tr>-->


                <tr ng-repeat="fila in ajaxDataCarritoShow track by $index">
                    <td>{{fila.obj_Producto.foto}}</td>
                    <td>{{fila.obj_Producto.desc}}</td>
                    <td>{{fila.obj_Producto.precio.toFixed(2)}}</td>
                    <td>{{fila.cantidad}}</td>                
                    <td>{{(fila.obj_Producto.precio * fila.cantidad).toFixed(2)}}</td>
                    <td> 
                        <a  ng-click="carrito('add', fila.obj_Producto.id, '1')"> 
                            <button style="font-size:15px" class="btn btn-info"><i class="fa fa-plus"></i></button>
                        </a> 
                        <a  ng-click="carrito('reduce', fila.obj_Producto.id, '1')"> 
                            <button style="font-size:15px" class="btn btn-success"><i class="fa fa-minus"></i></button>
                        </a> 
                        <a  ng-click="carrito('reduce', fila.obj_Producto.id, fila.cantidad)">
                            <button style="font-size:15px" class="btn btn-danger"><i class="fa fa-trash-alt"></i></button>
                        </a> 
                    </td>                                  
                </tr>
                <tr style="background: lightgray">
                    <td></td><td></td>
                    <th>TOTAL</th><td>{{cantidadProducto}}</td><td>{{precioProducto.toFixed(2)}}</td><td></td>
                </tr>
            </table>  
        </div>
        <div class="row justify-content-end" style="margin-top: 30px;">
            <div class="col-auto">                
                <button class="btn btn-danger" style="border: 1px solid black;" ng-click="empty()">
                    <i class="fa fa-times"> Vaciar carrito</i> 
                </button>                
            </div>
            <div class="col-auto">                
                <button class="btn btn-warning" style="border: 1px solid black;" ng-click="buy()">
                    <i class="fa fa-shopping-cart"> Comprar</i> 
                </button>                
            </div>            
        </div>
    </div>

    <div ng-show="carritoVacio" class="row justify-content-center">        
        <div class="alert alert-primary col-5" style="text-align: center">
            Tu carrito esta vacío. <a href="user/producto/plist" class="badge badge-primary"> VER LISTA DE PRODUCTOS </a>
        </div>
    </div>    
    <div ng-show="productoComprado" class="row justify-content-center">        
        <div class="alert alert-primary col-5" style="text-align: center">
            Se ha creado la factura correctamente <a href="user/usuario/plistfactura/{{usuariologeadoID}}" class="badge badge-success"> VER FACTURA </a>
        </div>
    </div>    
</div>
<footer class="footer" ng-include="'js/app/footer.html'"></footer>